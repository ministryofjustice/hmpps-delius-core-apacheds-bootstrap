---
# tasks file for hmpps-delius-core-apacheds-bootstrap

- name: Set JVM memory args
  lineinfile:
    path: '{{ apacheds_lib_directory }}/conf/wrapper.conf'
    line: '{{ item.line }}'
    create: yes
  with_items:
    - { line: 'wrapper.java.additional.6=-Xms{{ jvm_mem_args }}m' }
    - { line: 'wrapper.java.additional.7=-Xmx{{ jvm_mem_args }}m' }

- name: Start service apacheds, on boot
  service:
    name: "{{ apacheds_version }}"
    enabled: yes

- name: Restart apacheds
  include: restart-apacheds.yml